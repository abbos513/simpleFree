<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FreelancerFillingApplication</title>

    <link rel="stylesheet" href="../static/bootstrap/css/bootstrap.min.css"
          th:href="@{/bootstrap/css/bootstrap.min.css}" type="text/css">
    <link rel="stylesheet" href="../static/fonts/ionicons.min.css" th:href="@{/fonts/ionicons.min.css}" type="text/css">
    <link rel="stylesheet" href="../static/css/Footer-Clean.css" th:href="@{/css/Footer-Clean.css}" type="text/css">
    <link rel="stylesheet" href="../static/css/Navigation-with-Button.css" th:href="@{/css/Navigation-with-Button.css}"
          type="text/css">
    <link rel="stylesheet" href="../static/css/Registration-Form-with-Photo.css"
          th:href="@{/css/Registration-Form-with-Photo.css}" type="text/css">
    <link rel="stylesheet" href="../static/css/styles.css" th:href="@{/css/styles.css}" type="text/css">

    <!--<script type="text/javascript" src="https://code.jquery.com/jquery-3.3.1.min.js"></script>-->
    <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

    <!--https://code.jquery.com/jquery-3.3.1.min.js-->
    <!--//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js-->

    <!--th:src="@{jquery/jquery-3.3.1.js}"-->

</head>

<body>
<div>
    <nav class="navbar navbar-dark navbar-expand-md bg-success navigation-clean-button"
         style="background-color:#66d7d7;">
        <div class="container">
            <a class="navbar-brand" href="#">Company Name</a>
            <button class="navbar-toggler" data-toggle="collapse" data-target="#navcol-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="navbar-toggler-icon"></span></button>
            <div class="collapse navbar-collapse"
                 id="navcol-1">
                <ul class="nav navbar-nav mr-auto"></ul>
                <span class="navbar-text actions"> <a href="#" class="login">Log In</a><a
                        class="btn btn-light action-button" role="button" href="#">Sign Up</a></span></div>
        </div>
    </nav>
</div>
<div style="height:1365px;background-color:rgba(0,0,0,0.1);padding-top:17px;">
    <div style="margin:0px;height:1327px;background-color:#f7f9fc;padding:0px;width:940px;align-items:center;margin-left:26px;align:center;/*float:initial;*/position:inherit;margin-left:auto;margin-right:auto;">

        <form method="POST" action="/auth/fillFree">

        <div class="table-responsive">
            <table class="table">
                <thead>
                <tr></tr>
                </thead>
                <tbody>
                <tr>
                    <td style="width:298px;">
                        <img id="demo" style="width:200px;height:200px;margin:27px;margin-left:56px;"
                             th:src="@{/userFiles/1.jpg}"/>
                        <form method="POST" action="/auth/upload" enctype="multipart/form-data">
                            <input type="file" name="file"/>
                            <br/>
                            <br/>
                            <input class="btn btn-primary" onclick="imageClick()" type="submit" value="Add" style="margin-left:102px;height:29px;font-size:14px;padding:0px;width:112px;margin-top:12px;float:left;align-items:center;background-color:#56c6c6;"/>
                        </form>
                    </td>
                    <td style="width:248px;">
                        <label style="margin-right:10px;width:225px;margin-top:40px">Email address: (not changable)</label><br/>
                        <label style="margin-right:10px;width:210px;margin-top:10px;">Username: (not changable)</label>
                        <label style="margin-right:10px;width:210px;margin-top:10px;">First name:<br></label>
                        <label style="margin-right:10px;width:160px;margin-top:10px;">Last name:<br></label>
                        <label style="margin-right:40px;width:160px;margin-top:10px;">Phone number:<br></label>
                    </td>
                    <td><input type="text" th:value="${email}" readonly="readonly" style="width:300px;margin-top:40px;">
                        <input type="text" th:value="${username}" readonly="readonly" style="width:300px;margin-top:10px;">
                        <input name="firstName" type="text" style="width:300px;margin-top:10px;">
                        <input name="lastName" type="text" style="width:300px;margin-top:10px;">
                        <input type="phoneNumber" style="width:300px;margin-top:10px;">
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
        <div style="height:156px;background-color:#f7f9fc;">
            <h1 style="font-size:28px;padding-top:12px;padding-left:42px;">Languages</h1>
            <div style="width:25%;color:rgb(44,129,214);height:129px;background-color:#f7f9fc;float:left;">
                    <select id="languageId" style="margin-left:42px;margin-top:20px;width:150px;">
                            <th:block th:each="language1 : ${languages}">
                                <option th:value="${language1.getId()}" th:text="${language1.getLanguage()}"></option>
                            </th:block>
                    </select>

                    <select id="levelId" style="margin-left:42px;margin-top:20px;width:150px;">
                        <th:block th:each="level : ${languageLevel}">
                            <option th:value="${level.getId()}" th:text="${level.getLevel()}"></option>
                        </th:block>
                    </select>

                    <input id="btnAddLanToArray" style="margin: 20px; margin-left: 40px;" class="btn btn-primary" type="button" value="Add"/>

            </div>

            <div style="width:75%;color:rgb(24,95,166);height:100px;background-color:#e9e9e96e;float:right;margin-right:0px;">
                <div class="table-responsive" style="margin-right:60px;width:100%;">
                    <table class="table" style="width: 100%;">
                        <thead>
                        <tr></tr>
                        </thead>
                        <tbody>
                        <tr style="border:0;background: #0062cc;">
                            <div id="showList" style="background: blue; width: 100%; margin-top: 20px;">

                            </div>

                        </tr>
                        <tr></tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <input id="remove1" class="btn btn-primary" type="button" style="margin-top: 17px; float: right; margin-right: 78px;" value="Remove All"/>

        </div>
        <div style="background-color:#f7f9fc;height:175px; margin-top: 60px;">
            <h1 style="font-size:28px;padding-top:12px;padding-left:42px;">Address</h1>
            <label style="margin-right:-55px;width:175px;margin-top:10px;margin-left:37px;">City:<br></label>
            <input type="text" name="city">
            <label style="margin-right:-9px;width:160px;margin-top:10px;margin-left:71px;">Region/State:<br></label>
            <input type="text" name="regionState" style="width:300px;">
            <label style="margin-right:-9px;width:160px;margin-top:10px;margin-left:425px;">Country:<br></label>
            <input type="text" style="width:300px;" name="country">
        </div>
        <div
                style="height:183px;">
            <h1 style="font-size:28px;padding-top:12px;padding-left:42px;">About me</h1>
            <textarea style="margin-left:48px;width:830px;height:92px;font-size:14px;" name="aboutMe"></textarea></div>
        <div style="height:270px;">
            <h1 style="font-size:28px;padding-top:12px;padding-left:42px;">Skills</h1>
            <div style="height:200px;background-color:#f7f9fc;width:35%;float:left;">
                <select id="skillType" style="margin-left:49px;width:229px;height:28px;">
                <!--<optgroup label="Skill type group ">-->
                    <option value="1" selected>Programming</option>
                    <option value="2">Writing</option>
                <!--</optgroup>-->
            </select>
                <!--<button id="SelectType">Add</button>-->
                <select id="showSkills" multiple style="margin-left:49px;margin-top:15px;width:230px; height:150px">
                    <!--<th:block th:each="skill : ${writing}">-->
                        <!--<option th:value="${skill.getId()}" th:text="${skill.getSkill()}"></option>-->
                    <!--</th:block>-->
            </select>
                <button id="removeSkills" style="margin-right: 50px; float: right;" class="btn btn-primary">Remove All</button>
            </div>
            <div id="addedSkills" style="width:59%;float:left;height:194px;background-color:#dddddd;margin-left:0px;">

            </div>
        </div>
        <div style="height:127px;background-color:#f7f9fc;width:940px; margin-top: 20px;">
            <div style="height:125px;background-color:#f7f9fc;float:left;width:35%;">
                <h1 style="font-size:28px;padding-top:2px;padding-left:42px;height:49px;width:236px;float:left;">
                    Attached files</h1>
                <button class="btn btn-primary" type="button"
                        style="margin-left:72px;height:29px;font-size:14px;padding:0px;width:112px;margin-top:12px;float:left;background-color:#56c6c6;">
                    Choose file
                </button>
            </div>
            <div style="background-color:#dddddd;height:126px;float:left;width:59%;"></div>
        </div>
        <button class="btn btn-primary" type="submit" style="float:right;padding-right:10px;margin-right:55px;margin-top:21px;width:204px;background-color:#56c6c6;"> Submit </button>
    </div>
    </form>
</div>
<div class="footer-clean" style="color:#fff;background-color:#28a745;">
    <footer>
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-sm-4 col-md-3 item">
                    <h3>Services</h3>
                    <ul>
                        <li><a href="#">Web design</a></li>
                        <li><a href="#">Development</a></li>
                        <li><a href="#">Hosting</a></li>
                    </ul>
                </div>
                <div class="col-sm-4 col-md-3 item">
                    <h3>About</h3>
                    <ul>
                        <li><a href="#">Company</a></li>
                        <li><a href="#">Team</a></li>
                        <li><a href="#">Legacy</a></li>
                    </ul>
                </div>
                <div class="col-sm-4 col-md-3 item">
                    <h3>Careers</h3>
                    <ul>
                        <li><a href="#">Job openings</a></li>
                        <li><a href="#">Employee success</a></li>
                        <li><a href="#">Benefits</a></li>
                    </ul>
                </div>
                <div class="col-lg-3 item social"><a href="#"><i class="icon ion-social-facebook"></i></a><a href="#"><i
                        class="icon ion-social-twitter"></i></a><a href="#"><i class="icon ion-social-snapchat"></i></a><a
                        href="#"><i class="icon ion-social-instagram"></i></a>
                    <p class="copyright">Company Name Â© 2017</p>
                </div>
            </div>
        </div>
    </footer>
</div>

<!--<script src="../static/js/jquery.min.js" th:href="@{/js/jquery.min.js}" type="text/javascript"></script>-->
<script src="../static/bootstrap/js/bootstrap.min.js" th:href="@{/js/bootstrap.min.css}" type="text/css"></script>


<script type="text/javascript" th:inline="javascript">
    /*<![CDATA[*/



    /*]]>*/
</script>


<script type="text/javascript" th:inline="javascript">
    var lanIdArr = [];// arrays to keep languges and level IDs
    var levelIdArr = [];

    // lanArr = [];
    // levelArr = [];

    // var lanid = [];
    // var lanName = [];

    var lan = [[${languages}]]; // model objects converted to javascript objects
    var lev = [[${languageLevel}]];



    // $(function () {
    //     for(th:each="language1 : ${languages}){
    //         var a = language1;
    //         console.log(a);
    //         // lanName.push([[item.getName()]]);
    //     }
    // });

    // console.log(lanid + "    " + lanName);

    $(function () {
            $("#btnAddLanToArray").click(function () {

                var lanId = $("#languageId").val(); // getting lan and level IDs
                var levelId = $("#levelId").val();

                if(!lanIdArr.includes(lanId)){// checking if languages exsist in array
                    lanIdArr.push(lanId);// if does not thern add language id
                    levelIdArr.push(levelId);
                }// adding ids to arrays


                // debugger;


                $("#showList").html("");
                for(let i=0; i<lanIdArr.length; i++){// getting ech language id and find lan name by language id
                    var lanId1 = lanIdArr[i]; //
                    var levelId1 = levelIdArr[i];

                    var lanName= lan.filter(function(e) {
                        return e.id == lanId1; // getting language by id
                    });

                    var levelName = lev.filter(function(e) {
                        return e.id == levelId1;// getting level by id
                    });

                    var name = lanName[0].language;//getting language name`s language value
                    var level = levelName[0].level;// the same with level

                    // var levelId1 = levelIdArr[i];

                    var exsistList = $("#showList").html();// getting exsisting html

                    $("#showList").html(exsistList + '<div id="remove" style="width: 33%; float: left;"> ' + name + " "+ level + " " + '</div>'); // adding new elements to exsisting html

                }
                // console.log(lanIdArr +"   " + levelIdArr);
                //
                // console.log(lanIdArr +"   " + levelIdArr);
            });


            // removing functions
            // $("$remove")[0].hide();
        // debugger;
        //     var a = $("#aaa").val();
        //     console.log(a);


        // debugger;
        $("#remove1").click(function () {
            lanIdArr = [];
            levelIdArr = [];
            console.log(lanIdArr+" " + levelIdArr);
            $("#showList").html("");
            });
        });

        var writingSkillList = [[${writing}]];
        var programmingSkillList = [[${programming}]];

        $("#skillType").change(function () {
            // debugger;

            var skillTypeVal = $("#skillType").val();

            $("#showSkills").html('');
            if(skillTypeVal == "1"){
                // $("#showSkills").html('<select id="showSkills" multiple style="margin-left:49px;margin-top:15px;width:230px; height:150px">\n' +
                //     '                    <th:block th:each="skill : ${programming}">\n' +
                //     '                        <option th:value="${skill.getId()}" th:text="${skill.getSkill()}"></option>\n' +
                //     '                    </th:block>\n' +
                //     '            </select>');
                for(let i=0; i<programmingSkillList.length; i++){
                    var skill = programmingSkillList[i];
                    console.log(skill);
                    var old = $("#showSkills").html();
                    $("#showSkills").html(old + '<option value="'+skill.id+'" text="' +skill.skill +'"></option>');
                }
            }else if(skillTypeVal == "2"){
                // $("#showList").html('<select id="showSkills" multiple style="margin-left:49px;margin-top:15px;width:230px; height:150px">\n' +
                //     '                    <th:block th:each="skill : ${writing}">\n' +
                //     '                        <option th:value="${skill.getId()}" th:text="${skill.getSkill()}"></option>\n' +
                //     '                    </th:block>\\n\' +\n' +
                //     '                    \'            </select>');
                for(let i=0; i<writingSkillList.length; i++){
                    var skill = writingSkillList[i];
                    console.log(skill);
                    var old = $("#showSkills").html();
                    $("#showSkills").html(old + '<option value="'+skill.id+'" text="' +skill.skill +'"></option>');
                }
            }

        });

        var skillIdArr = [];

        $("#showSkills").change(function () {
            var skillId = $("#showSkills").val()[0];
            // console.log(skillId);
            // debugger;

            if(!skillIdArr.includes(skillId)) {// checking if languages exsist in array
                // console.log(!skillIdArr.includes(skillId));
                skillIdArr.push(skillId);

                // console.log(skillIdArr);
                var allSkills = writingSkillList.concat(programmingSkillList);
                // console.log(allSkills);

                var skillFromArray = allSkills.filter(function (e) {
                    return e.id == skillId; // getting skill by id
                });
                // console.log(skillFromArray);

                var skill1 = skillFromArray[0];
                // console.log(skill1);

                var skillName = skill1.skill;
                // console.log(skillName);

                var oldVal = $("#addedSkills").html();
                $("#addedSkills").html(oldVal + '<div style="width: 33%; float: left; text-align: center;"> ' + skillName + '</div>'); // adding new elements to exsisting html
                // console.log(skillIdArr);
            }
            // console.log(skillIdArr);
        });

        $("#removeSkills").click(function () {
            // debugger;
            skillIdArr = [];
            $("#addedSkills").html("");
            // console.log(skillIdArr);
        });

</script>

</body>

</html>